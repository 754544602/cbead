$(function(){$yt_baseElement.radioCheckBoxInit();parent.$yt_baseElement.hideLoading()});var $yt_baseElement={tableRowActive:function(){$('.yt-table .yt-tbody tr').off("click").on("click",function(){$(this).addClass('yt-table-active').siblings().removeClass('yt-table-active')})},radioCheckBoxInit:function(){$("body").delegate(".yt-checkbox input[type='checkbox']","change",function(){if($(this)[0].checked){$(this).parent().addClass("check")}else{$(this).parent().removeClass("check")}});$("body").delegate(".yt-radio input[type='radio']","change",function(){var docName=$(this).attr("name");if($(this).parents("form").length==0){$(this).parents("body").find(".yt-radio input[type='radio'][name='"+docName+"']").not("form input[type='radio']").parent().removeClass("check")}else{$(this).parents("form").find(".yt-radio input[type='radio'][name='"+docName+"']").parent().removeClass("check")}$(this).parent().addClass("check")});$(".yt-checkbox.check").find("input[type='checkbox']").prop("checked",true);$(".yt-radio.check").find("input[type='radio']").prop("checked",true)},processerbar:function(obj,lineWid,speed){$(obj).css("display","block");$(obj).find(".yt-progress-line").each(function(i,item){$(item).animate({width:(lineWid==undefined?0:lineWid)+"%"},speed)});var si=window.setInterval(function(){var a=$(obj).find(".yt-progress-line").width();var c=$(obj).width();var b=(a/c*100).toFixed(0);$(obj).find(".yt-progress-percent").html(b+"%");$(obj).find(".yt-progress-percent").css("left",a-26+"px");$(obj).find(".yt-progress-ball-div").css("left",a-10+"px");if($(obj).find(".yt-progress-percent").html()=="100%"){window.clearInterval(si)}},10)},btnClick:function(){$('.yt-option-btn').click(function(){$(this).addClass('yt-option-button-sure')})},numberInput:function(obj){var myInputNumber=$(obj);var spinUp=myInputNumber.find('[data-node=up]');var spinDown=myInputNumber.find('[data-node=down]');var input=spinUp.parent().prev();spinUp.click(function(){var curVal=Number(input.val())||0;var step=Number(input.attr('step'))||1;input.val(curVal+step);input.css({'color':"#333"})});spinDown.click(function(){var curVal=Number(input.val())||0;var step=Number(input.attr('step'))||1;if(curVal-step>=0){input.val(curVal-step)}input.css({'color':"#333"})});var keyCode={};input.keydown(function(e){var kc=e.keyCode;if((kc>=48&&kc<=57)||(kc>=96&&kc<=105)||kc==189||kc==190||kc==110||kc==8||kc==37||kc==39){return true}return false});input.keyup(function(){$(this).val($(this).val().replace(/[^\d.]/g,''));input.css({'color':"#333"})})},fmMoney:function(s,n){s=String(s).replace(".","$#$").replace(/\./g,"").replace("$#$",".");n=n>0&&n<=20?n:2;s=Number((s+"").replace(/[^\d\.-]/g,"")).toFixed(n)+"";var l=s.split(".")[0].split("").reverse(),r=s.split(".")[1];t="";for(i=0;i<l.length;i+=1){t+=l[i]+((i+1)%3==0&&(i+1)!=l.length?",":"")}return t.split("").reverse().join("")+"."+r},rmoney:function(s){s=String(s);s==''?s='0':s=s;return parseFloat(s.replace(/[^\d\.-]/g,""))},showLoading:function(){if(window!=top){window.parent.$yt_baseElement.showLoading()}else{$yt_baseElement.timestamp=new Date().getTime();if($(".loading-model").length==0){var loadingStr='<div class="loading-model" style="text-align: center;position: fixed;background: none;z-index:1001"><div><img class="loading-img" style="width:160px;height:160px" src="'+$yt_option.websit_path+'resources/images/icons/loading.gif"/></div><div>';$("body").append(loadingStr)}$yt_alert_Model.getDivPosition($(".loading-model"));$(".loading-model,#heard-nav-bak,#pop-modle-bg").show();$("#frame-right-model").css("z-index",10)}},hideLoading:function(backFun){if(window!=top){window.parent.$yt_baseElement.hideLoading(backFun)}else{var managerTime=500;var setTime=0;var nowTime=new Date().getTime();var thisTime=nowTime-$yt_baseElement.timestamp;if(thisTime<=managerTime){setTime=managerTime-thisTime;setTimeout(function(){$("#pop-modle-bg,#heard-nav-bak").hide();$(".loading-model").hide();$("#frame-right-model").css("z-index",1000);backFun&&backFun()},setTime)}else{$("#pop-modle-bg,#heard-nav-bak").hide();$(".loading-model").hide();$("#frame-right-model").css("z-index",1000);backFun&&backFun()}}},pageLoadingShow:function(){$yt_baseElement.timestamp=new Date().getTime();var loadingStr='<div class="page-loading"><img class="loading-img" style="width:130px;height:130px" src="'+$yt_option.websit_path+'resources/images/icons/loading.gif"/></div>';$("#yt-index-main-nav").append(loadingStr);$(".page-loading").show()},pageLoadingHide:function(){var setTime=0;var nowTime=new Date().getTime();var thisTime=nowTime-$yt_baseElement.timestamp;if(thisTime<=1000){setTime=1000-thisTime;setTimeout(function(){$(".page-loading").remove()},setTime)}else{$(".page-loading").remove()}},showMongoliaLayer:function(){$('#pop-modle-alert,#heard-nav-bak',window.parent.document).css("display","block")},hideMongoliaLayer:function(){$('#pop-modle-alert,#heard-nav-bak',window.parent.document).css("display","none")},unSerialize:function(param){var reulst={};if(param!=""&&param!=undefined){var strs=param.split("&");for(var i=0;i<strs.length;i+=1){reulst[strs[i].split("=")[0]]=decodeURIComponent(strs[i].split("=")[1])}}return reulst}};var $yt_controlElement={bubbleFun:function(obj,isShort){var isShort=isShort==undefined?true:isShort;$(obj).each(function(i,n){var bubbleWid=$(obj).width()-1;if($(n).text().length==2){$(n).css("width",(bubbleWid+10)+"px")}if(isShort){if($(n).text().length>=3){$(n).html("<span style='margin-left: -5px;'>99<sup>+</sup></span>");$(n).css("width",(bubbleWid+20)+"px")}}else{if($(n).text().length>=3){$(n).css({"width":"auto","padding":"0px 5px"})}}})}};var $yt_alert_Model={alertOne:function(option){var alertStr='<div class="yt-pop-model yt-alert-model yt-alert-one"><div class="yt-alert-close"></div><div class="yt-alert-one-icon"></div><div class="yt-alert-one-msg"></div><div class="yt-alert-one-bottom"></div></div>';$("body").append(alertStr);$(".yt-alert-model").show();$("#heard-nav-bak").show();var haveAlertIcon=option.haveAlertIcon==undefined?false:option.haveAlertIcon;var haveCloseIcon=option.haveCloseIcon==undefined?false:option.haveCloseIcon;var iconUrl=option.iconUrl==undefined?"":option.iconUrl;var closeIconUrl=option.closeIconUrl==undefined?"":option.closeIconUrl;var alertMsg=option.alertMsg==undefined?"":option.alertMsg;var leftBtnName=option.leftBtnName?option.leftBtnName:"确认";var rightBtnName=option.rightBtnName?option.rightBtnName:"取消";var confirmFunction=option.confirmFunction;var cancelFunction=option.cancelFunction;var thisAlert=$(".yt-alert-model");if(haveCloseIcon&&closeIconUrl!=""){$(".yt-alert-close").append('<img src="'+closeIconUrl+'">');$(".yt-alert-close img").bind("click",function(){$yt_alert_Model.alertHide(thisAlert)})}if(haveAlertIcon&&iconUrl!=""){$(".yt-alert-one-icon").append('<img  class="warn-icon" src="'+iconUrl+'"/>')}if(confirmFunction!=undefined){var leftButton=$('<input type="button" class="yt-model-bot-btn  yt-model-sure-btn" value="'+leftBtnName+'"/>');var rightButton=$('<input type="button" class="yt-model-bot-btn yt-model-canel-btn" value="'+rightBtnName+'"/>');$(".yt-alert-one-bottom").empty().append(leftButton);$(".yt-alert-one-bottom").append(rightButton);leftButton.click(function(){$yt_alert_Model.alertHide(thisAlert);confirmFunction()});rightButton.click(function(){$yt_alert_Model.alertHide(thisAlert);if(cancelFunction){cancelFunction()}})}else{var action=$('<input type="button" class="yt-model-bot-btn yt-model-sure-btn" value="'+leftBtnName+'"/>');action.click(function(){$yt_alert_Model.alertHide(thisAlert);if(cancelFunction){cancelFunction()}});$(".yt-alert-one-bottom").empty().append(action)}$(".yt-alert-one-msg").html(alertMsg);$yt_alert_Model.getDivPosition($(".yt-alert-model"));$("body").css("overflow","hidden")},alertTwo:function(option){var alertStr='<div class="yt-pop-model yt-alert-model yt-alert-two"><div class="yt-alert-two-icon"></div><div class="yt-alert-two-msg"></div><div class="yt-alert-two-attach"></div></div>';$("body").append(alertStr);$(".yt-alert-model").show();$("#heard-nav-bak").show();var alertMsg=option.alertMsg==undefined?"":option.alertMsg;var alertMsgTwo=option.alertMsgTwo==undefined?"":option.alertMsgTwo;var haveAlertIcon=option.haveAlertIcon==undefined?false:option.haveAlertIcon;var haveSecon=option.haveSecon==undefined?false:option.haveSecon;var iconUrl=option.iconUrl==undefined?"":option.iconUrl;var secondNum=option.secondNum=undefined?"":option.secondNum;var skipUrl=option.skipUrl=undefined?"":option.skipUrl;var thisAlert=$(".yt-alert-model");if(haveAlertIcon&&iconUrl!=""){$(".yt-alert-two .yt-alert-two-icon").append('<img src="'+iconUrl+'" />')}if(haveSecon&&secondNum!=""&&skipUrl!=""){$(".yt-alert-two .yt-alert-two-attach").append('<span class="yt-attach-msg">'+alertMsgTwo+'</span><span class="yt-secs-num"></span>');for(var i=secondNum;i>=0;i-=1){window.setTimeout('$yt_alert_Model.getTimeNum('+i+',"'+skipUrl+'")',(secondNum-i)*1000)}}else{$(".yt-alert-two .yt-alert-two-attach").append('<span class="yt-attach-msg">'+alertMsgTwo+'</span>');}$(".yt-alert-two .yt-alert-two-msg").html(alertMsg);$("#pop-modle-alert").off().on("click",function(){$yt_alert_Model.alertHide(thisAlert)});$yt_alert_Model.getDivPosition($(".yt-alert-model"));$("body").css("overflow","hidden")},alertThree:function(option){var modelAttributeClass=option.modelClassName.attr("class")==undefined?"":option.modelClassName.attr("class");var modelAttributeId=option.modelClassName.attr("id")==undefined?"":option.modelClassName.attr("id");var thisAlert=$(".yt-alert-table");var haveAlertIcon=option.haveAlertIcon==undefined?false:option.haveAlertIcon;var iconUrl=option.iconUrl==undefined?"":option.iconUrl;var titleMsg=option.titleMsg==undefined?"":option.titleMsg;var isDrag=option.isDrag==undefined?true:option.isDrag;var alertStr='<table class="yt-pop-model yt-alert-table"><tr><td><div class="yt-alert-three"><div class="yt-alert-three-title"><span class="yt-alert-three-icon"><img /></span><span class="yt-alert-three-title-msg"></span></div><div class="warp-model"></div></div></td></tr></table>';if(!$("body").find(".yt-alert-table div").hasClass(modelAttributeClass)){$("body").append(alertStr)}if(haveAlertIcon&&iconUrl!=""){$(".yt-alert-three-icon img").attr("src",iconUrl)}$(".yt-alert-three-title-msg").html(titleMsg);$(".warp-model").wrapInner(function(){return option.modelClassName});$("#heard-nav-bak").show();$(".yt-alert-table").show();option.modelClassName.show();option.modelClassName.css("display","block");if(isDrag){$yt_model_drag.modelDragEvent($(".yt-alert-three .yt-alert-three-title"))}$yt_alert_Model.getDivPosition($(".yt-alert-table"));$("body").css("overflow","hidden")},prompt:function(alertMsg,hideTime){$(".yt-alert-four").remove();var alertStr='<div class="yt-alert-four"><span class="yt-alert-four-msg">'+(alertMsg==undefined?"":alertMsg)+'</span></div>';$("body").append(alertStr);$(".yt-alert-four").css("display","block");setTimeout(function(){$(".yt-alert-four").remove()},hideTime==undefined?2000:hideTime)},alertHide:function(thisObj){$(thisObj).remove();$("#pop-modle-alert").hide();$("#heard-nav-bak").hide();$yt_baseElement.hideMongoliaLayer();$("body").css("overflow","auto")},getTimeNum:function(num,page_url){$(".yt-alert-two .yt-alert-two-attach .yt-secs-num").html(num);if(num==0){$yt_alert_Model.alertHide($(".yt-alert-model.yt-alert-two"));$left_menu.switchTab(1,$yt_option.base_path+page_url)}},getDivPosition:function(obj){var scrollTop="";var scrollLeft="";var q_alert_top="";var q_alert_left=($(window).width()-$(obj).outerWidth())/2;if($(obj).hasClass("yt-edit-alert")){q_alert_top=($(window).height()-$(obj).find(".yt-edit-alert-main").outerHeight()-$(obj).find(".yt-edit-alert-title").height())/2}else{q_alert_top=($(window).height()-$(obj).height())/2}if(q_alert_left>0){$(obj).css("left",q_alert_left+"px")}else{$(obj).css("left","0")}if(q_alert_top>0){$(obj).css("top",q_alert_top+"px")}else{$(obj).css("top","0px")}},setFiexBoxHeight:function(para){var fiexBox=$(para);$.each(fiexBox,function(i,n){var boxHeight=$(n).height()+46;var maxheight=$(window).height()-140;if(boxHeight>=maxheight){$(n).css({height:maxheight,overflow:"auto"})}else{$(n).css({height:"auto",overflow:"auto"})}$(window).resize(function(){maxheight=$(window).height()-140;if(boxHeight>=maxheight){$(n).css({height:maxheight,overflow:"auto"})}else{$(n).css({height:"auto",overflow:"auto"})}})})}};var $yt_model_drag={modelDragEvent:function(dragObj,options){var _moveDiv=$(dragObj);var _moveArea=options?$(options):$(document);var isDown=false;_moveDiv.mousedown(function(event){var scrollTop=$(window).scrollTop();var scrollLeft=$(window).scrollLeft();_moveDiv.css("cursor","move");var e=event||window.event;var x=e.pageX-_moveDiv.offset().left;var y=e.pageY-_moveDiv.offset().top;_moveArea.on('mousemove',function(event){var ev=event||window.event;var abs_x=ev.pageX-x-scrollLeft;var abs_y=ev.pageY-y-scrollTop;_moveDiv.parent().css("margin","inherit");_moveDiv.parent().css({'left':abs_x,'top':abs_y})})});_moveDiv.mouseup(function(){_moveArea.off('mousemove')})}};$.fn.extend({setCheckBoxState:function(obj){$(this).each(function(i,n){if(obj=="check"){$(n).parent().addClass("check");$(n)[0].checked=true}else{$(n).parent().removeClass("check")}if(obj=="uncheck"){$(n).parent().removeClass("check");$(n)[0].checked=false;$(n).parent().removeClass("yt-check-disabled")}if(obj=="disabled"){$(n)[0].disabled=true;$(n)[0].checked=false;$(n).parent().addClass("yt-check-disabled")}if(obj=="undisabled"){$(n)[0].disabled=false;$(n).parent().removeClass("yt-check-disabled")}if(obj=="half"){$(n).parent().addClass("yt-checkbox-half")}else{$(n).parent().removeClass("yt-checkbox-half")}})},setRadioState:function(obj){$(this).each(function(i,n){var docName=$(n).attr("name");if(obj=="uncheck"){$(n)[0].checked=false;$(n).parent().removeClass("yt-radio-disabled");if($(n).parents("form").length==0){$(n).parents("body").find(".yt-radio input[type='radio'][name='"+docName+"']").not("form input[type='radio']").parent().removeClass("check")}else{$(n).parents("form").find(".yt-radio input[type='radio'][name='"+docName+"']").parent().removeClass("check")}}if(obj=="disabled"){$(n)[0].disabled=true;$(n)[0].checked=false;$(n).parent().addClass("yt-radio-disabled").removeClass("check")}if(obj=="undisabled"){$(n)[0].disabled=false;$(n).parent().removeClass("yt-radio-disabled")}if(obj=="check"){if($(n).parents("form").length==0){$(n).parents("body").find(".yt-radio input[type='radio'][name='"+docName+"']").not("form input[type='radio']").parent().removeClass("check")}else{$(n).parents("form").find(".yt-radio input[type='radio'][name='"+docName+"']").parent().removeClass("check")}$(n)[0].checked=true;$(n).parent().addClass("check")}})},setSelectVal:function(selVal){$(this).find("option[value='"+selVal+"']").prop("selected","selected");var selText=$(this).find("option:selected").text();$(this).next().find(".list li").removeClass("selected");$(this).next().find(".list li").removeClass("focus");$(this).next().find(".list li[data-value='"+selText+"']").addClass("selected");$(this).next().find(".list li[data-value='"+selText+"']").addClass("btn-primary");$(this).next().find(".list li[data-value='"+selText+"']").addClass("focus");$(this).next().find(".current").text(selText).css("color","#333");$(this).next().find(".search-current").val(selText).css("color","#333")},show:function(){if($(this).hasClass("yt-pop-model")){$("#pop-modle-alert").css("display","block");$yt_baseElement.showMongoliaLayer()}if($(this).hasClass("yt-alert-table")){$("#pop-modle-alert").css("display","block");$yt_baseElement.showMongoliaLayer()}return showHide(this,true)},hide:function(){if($(this).hasClass("yt-pop-model")){$("#pop-modle-alert").css("display","none");$yt_baseElement.hideMongoliaLayer()}return showHide(this)},setDatas:function(data){var me=$(this);var dataArr=[];for(var i=0;i<Object.keys(data).length;i+=1){dataArr.push({name:Object.keys(data)[i],value:data[Object.keys(data)[i]]})}$.each(dataArr,function(i,n){me.find("[data-val='"+n.name+"']").val(n.value);me.find("[data-text='"+n.name+"']").text(n.value)})},getDatas:function(){var me=$(this);var data={};$.each(me.find("[data-val]"),function(i,n){data[$(n).attr('data-val')]=$(n).val()||$(n).text()});$.each(me.find("[data-text]"),function(i,n){data[$(n).attr('data-text')]=$(n).text()});return data},niceSelect:function(option){this.elementObj=$(this);elementObj=$(this);elementOption=option;if(typeof method=='string'){if(method=='update'){this.each(function(){var $select=$(this);var $dropdown=$(this).next('.nice-select');var open=$dropdown.hasClass('open');if($dropdown.length){$dropdown.remove();create_nice_select($select);if(open){$select.next().trigger('click')}}})}else if(method=='destroy'){this.each(function(){var $select=$(this);var $dropdown=$(this).next('.nice-select');if($dropdown.length){$dropdown.remove();$select.css('display','')}});if($('.nice-select').length==0){$(document).off('.nice_select')}}else{console.log('Method "'+method+'" does not exist.')}return this}this.each(function(){var $select=$(this);if(!$select.next().hasClass('nice-select')){create_nice_select($select)}else{$select.next().remove();create_nice_select($select)}});this.hide();function create_nice_select($select){var showItem='<span class="current"></span><ul class="list"></ul>';if(option&&option.search){showItem='<span class="current" style="display:none"></span><input class="search-current" type="text" value=""/><ul class="list"></ul>'}$select.after($('<div></div>').addClass('nice-select').addClass($select.attr('class')||'').attr("style",$select.attr('style')||'').addClass($select.attr('disabled')?'disabled':'').attr('tabindex',$select.attr('disabled')?null:'0').html(showItem).show());var $dropdown=$select.next();var $options=$select.find('option');var $selected=$select.find('option:selected');$dropdown.find('.current').html($selected.data('display')||$selected.text());$dropdown.find('.current').next().val($selected.data('display')||$selected.text());if($selected.text()!="请选择"&&$selected.text()!='全部'){$dropdown.find('.current').css('color','#333');$dropdown.find('.search-current').css('color','#333')}$options.each(function(i){var $option=$(this);var display=$option.data('display');if(option&&option.search){$dropdown.find('ul div div:eq(0)').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}else if(option&&option.formateVal){$dropdown.find('ul').append($('<li></li>').attr('data-value',$option.val()).attr('sel-val',$option.attr('sel-val')).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}else{$dropdown.find('ul').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}});$dropdown.find(".search-current").on("focus",function(){var isClear=false;if($(this).val()==null||$(this).val()==undefined||$(this).val()==""||$(this).val()=="请选择"||$(this).val()=="全部"){isClear=true}if(isClear){$dropdown.find(".current,.search-current").val("")}else{$dropdown.find(".current,.search-current").css("color","#333")}});$dropdown.find(".search-current").keyup(function(event){if(event.keyCode==37||event.keyCode==38||event.keyCode==39||event.keyCode==40){return false}$(this).css('color',($(this).val()!='请选择'&&$(this).val()!='')?'#333':'#999');option.backFunction($(this).val());$select.find('option');$dropdown.find('ul').find("li").remove();$select.find('option').each(function(i){var $option=$(this);var display=$option.data('display');if(option&&option.search){$dropdown.find('ul div div:eq(0)').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}else{$dropdown.find('ul').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}});bindFunction($select,option)});$(".nice-select ul.list").mCustomScrollbar({autoHideScrollbar:true,theme:"square"})}bindFunction($(this),option);function bindFunction(obj,option){$(obj).next().off().on('click',function(event){var self=$(event.target);self.addClass('btn-primary');var $dropdown=$(this);var selectVal=$(obj).val();if(option&&option.search&&!self.hasClass("option")){option.backFunction("");$(obj).find("option[value='"+selectVal+"']").attr("selected","selected");var $select=$dropdown.prev("select");$select.find('option');$dropdown.find('ul').find("li").remove();$select.find('option').each(function(i){var $option=$(this);var display=$option.data('display');if(option&&option.search){$dropdown.find('ul div div:eq(0)').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}else{$dropdown.find('ul').append($('<li></li>').attr('data-value',$option.val()).attr('data-display',(display||null)).attr('title',$option.attr("title")).addClass('option'+($option.is(':selected')?' selected':'')+($option.is(':disabled')?' disabled':'')).html($option.text()))}});bindFunction($(this).prev(),option)}$('.nice-select').not($dropdown).removeClass('open');$dropdown.toggleClass('open');if($dropdown.hasClass('open')){selectScrollChange($dropdown);$dropdown.find('.option');$dropdown.find('.focus').removeClass('focus');$dropdown.find('.selected').addClass('focus')}else{$dropdown.focus()}});$(obj).next().find(".option:not(.disabled)").off('click').on('click',function(event){var $option=$(this);var $dropdown=$option.closest('.nice-select');$dropdown.find('.selected').removeClass('selected');$option.addClass('selected');var text=$option.data('display')||$option.text();$dropdown.prev('select').val($option.data('value')).trigger('change');if(option!=undefined&&option.formateVal!=undefined){text=option.formateVal($option)}$dropdown.find('.current').text(text);$dropdown.find('.current').next().val(text);$dropdown.find('.current,.search-current').css("color","#333");var userAgent=navigator.userAgent;var isOpera=userAgent.indexOf("Opera")>-1;var isIE=userAgent.indexOf("compatible")>-1&&userAgent.indexOf("MSIE")>-1&&!isOpera;if(isIE){var reIE=new RegExp("MSIE (\\d+\\.\\d+);");reIE.test(userAgent);var fIEVersion=parseFloat(RegExp["$1"]);if(fIEVersion<=8){if($dropdown.hasClass("page-num-list-sel")){$dropdown.removeClass("open")}}}selectScrollChange($dropdown)});$(obj).next().on('keydown',function(event){var $dropdown=$(this);var $focused_option=$($dropdown.find('.focus')||$dropdown.find('.list .option.selected'));if(event.keyCode==32||event.keyCode==13){if($dropdown.hasClass('open')){$focused_option.trigger('click')}else{$dropdown.trigger('click')}return false;}else if(event.keyCode==40){if(!$dropdown.hasClass('open')){$dropdown.trigger('click')}else{var $next=$focused_option.nextAll('.option:not(.disabled)').first();if($next.length>0){$dropdown.find('.focus').removeClass('focus');$next.addClass('focus')}}return false;}else if(event.keyCode==38){if(!$dropdown.hasClass('open')){$dropdown.trigger('click')}else{var $prev=$focused_option.prevAll('.option:not(.disabled)').first();if($prev.length>0){$dropdown.find('.focus').removeClass('focus');$prev.addClass('focus')}}return false;}else if(event.keyCode==27){if($dropdown.hasClass('open')){$dropdown.trigger('click')}}else if(event.keyCode==9){if($dropdown.hasClass('open')){return false}}});var style=document.createElement('a').style;style.cssText='pointer-events:auto';if(style.pointerEvents!=='auto'){$('html').addClass('no-csspointerevents')}}$(document).off("click.nice_select").on('click.nice_select',function(event){$yt_common.eventStopPageaction();var elementDiv=$(".nice-select.open").siblings("select");if($(event.target).closest('.nice-select').length===0){if(elementDiv.find("option:selected").length==0||elementDiv.find("option:selected").val()==""||elementDiv.find("option:selected").val()==undefined||elementDiv.next().find("li.selected").length==0||elementDiv.next().find(".search-current").val()==""){if(elementDiv.next().find(".search-current").val()==""){elementDiv.next().find(".search-current").val("请选择")}if(option&&option.search){elementDiv.prepend("<option value='' selected='selected'></option>")}}else{}$('.nice-select').removeClass('open').find('.option')}});return this},isOnScreen:function(){var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=this.offset();bounds.right=bounds.left+this.outerWidth();bounds.bottom=bounds.top+this.outerHeight();return(!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom))},autoHeight:function(){return this.each(function(){var $this=jQuery(this);if(!$this.attr('_initAdjustHeight')){$this.attr('_initAdjustHeight',$this.outerHeight())}_adjustH(this).on('input',function(){_adjustH(this)})});function _adjustH(elem){var $obj=jQuery(elem);return $obj.css({height:$obj.attr('_initAdjustHeight'),'overflow-y':'hidden'}).height(elem.scrollHeight)}}});jQuery.extend({ajaxDownloadFile:function(options){options.url.indexOf('?')==-1?options.url=options.url+'?yitianSSODynamicKey='+$yt_common.getyitianSSODynamicKey():options.url=options.url+'&yitianSSODynamicKey='+$yt_common.getyitianSSODynamicKey();var config=$.extend(true,{method:'post'},options);var $iframe=$('<iframe id="down-file-iframe-box" style="position: fixed;left: -100000px;" name="down-file-iframe" />');var $form=$('<form enctype="multipart/form-data" target="down-file-iframe" style="position: fixed;left: -100000px;" method="'+config.method+'" accept-charset="UTF-8" />');$form.attr('action',config.url);for(var key in config.data){$form.append("<input type='hidden' name='"+key+"' value='"+config.data[key]+"' />")}$(document.body).append($form);if($("#down-file-iframe-box").length==0){$(document.body).append($iframe)}$form[0].submit();setTimeout(function(){$form.remove()},1000);}});function selectScrollChange(dropdown){var docHei=$(window).height();var winScrollTop=$(window).scrollTop();var top=$(dropdown).offset().top-winScrollTop;var botHei=docHei-top;var objHeight=$(dropdown).find("ul").height();if(botHei<objHeight){$(dropdown).find("ul").removeClass("page-select-ul-posi");$(dropdown).find("ul").css({"top":"inherit","bottom":"27px"})}else{$(dropdown).find("ul").addClass("page-select-ul-posi")}}function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index+=1){elem=elements[index];if(!elem.style){continue}values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){jQuery._data(elem,"olddisplay",display)}}}for(index=0;index<length;index+=1){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}var curCSS,core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),elemdisplay={BODY:"block"};if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName]}var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}var DONT_ENUM="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(","),hasOwn=({}).hasOwnProperty;for(var i in{toString:1}){DONT_ENUM=false}Object.keys=Object.keys||function(obj){var result=[];for(var key in obj){if(hasOwn.call(obj,key)){result.push(key)}}if(DONT_ENUM&&obj){for(var i=0;key=DONT_ENUM[i++];){if(hasOwn.call(obj,key)){result.push(key)}}}return result};;(function($){var _ajax=$.ajax;$.addParam=function(oldP,addp){return oldP+"&"+$.param(addp)};$.ajax=function(opt){var fn={error:function(XMLHttpRequest,textStatus,errorThrown){console.log(opt)},success:function(data,textStatus){},complete:function(XHR,TS){}};if(opt.error){fn.error=opt.error}if(opt.success){fn.success=opt.success}if(opt.url.indexOf("http://")!=0){opt.url=$yt_option.base_path+opt.url}var dynamicKey=$yt_common.getToken();var cookieKey=$yt_common.ytAclCookieKey;var currentUserInfo=$yt_common.user_info;var yitianSSODynamicKey=$yt_common.getyitianSSODynamicKey();var ytParams={ajax:1};if(yitianSSODynamicKey!=undefined){ytParams['yitianSSODynamicKey']=yitianSSODynamicKey}if(cookieKey!=undefined){ytParams[cookieKey]=dynamicKey}var gettype=Object.prototype.toString;var contentType="application/x-www-form-urlencoded; charset=utf-8";if($yt_option.is_origin){if(window.XDomainRequest){contentType="text/plain";jQuery.support.cors=true;opt.type="get"}}opt.contentType=contentType;if(opt.data){if(opt.data!=undefined&&gettype.call(opt.data)=="[object Object]"){opt.data[cookieKey]=ytParams[cookieKey];opt.data['yitianSSODynamicKey']=ytParams['yitianSSODynamicKey'];opt.data.ajax=ytParams.ajax}else if(opt.data!=undefined){var paramStr=jQuery.param(ytParams);opt.data+="&"+paramStr}}else{opt.data=ytParams}var _opt=$.extend(opt,{error:function(XMLHttpRequest,textStatus,errorThrown){fn.error(XMLHttpRequest,textStatus,errorThrown)},success:function(data,textStatus){var gettype=Object.prototype.toString;try{if((jQuery.parseJSON(data).flag==undefined?"":jQuery.parseJSON(data).flag.toString())=="1"){$yt_common.login_state=false;var loginUrl=jQuery.parseJSON(data).data.ssoVerifyAddress;if(!$yt_option.is_cas){loginUrl=$yt_option.websit_index;}else{}location.href=loginUrl}else{$yt_common.login_state=true;data=jQuery.parseJSON(data)}}catch(e){}fn.success(data,textStatus)},complete:function(XHR,TS){fn.complete(XHR,TS)}});return _ajax(_opt)}})(jQuery);$(document).ready(function(){$('input.selectParam').unbind('keydown').bind('keydown',function(event){if(event.keyCode=="13"){$(this).siblings('.search-btn').click()}});$('.key-word input').unbind('keydown').bind('keydown',function(event){if(event.keyCode=="13"){$(this).siblings('.search-btn').click()}});$('input#keyword').unbind('keydown').bind('keydown',function(event){if(event.keyCode=="13"){$(this).siblings('.search-btn').click()}});$(".search-box").click(function(e){e.stopPropagation()});$(document).on('click','.calendar',function(e){e.stopPropagation()})});
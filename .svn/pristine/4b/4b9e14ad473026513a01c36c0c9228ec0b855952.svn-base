var carList={init:function(){carList.getPlanListInfo();$('.key-word').off().on('click','.search-btn',function(){carList.getPlanListInfo()});$(".merge").click(function(){var traineeId="";$('.select-assets-alert-checkbox input[class="select-assets-trainee-id"]:checked').each(function(){if(traineeId==""){traineeId=$(this).val()}else{traineeId+=","+$(this).val()}});if(traineeId==""){$yt_alert_Model.prompt("请选中多行数据进行操作",3000)}else{$yt_alert_Model.alertOne({alertMsg:"数据合并将无法恢复,确认合并吗?",confirmFunction:function(){$.ajax({type:"post",url:$yt_option.base_path+"trainee/updateTraineMergeEvisitingRecords",data:{pkIds:traineeId},async:false,success:function(data){$yt_alert_Model.prompt("合并成功！",2000);carList.getPlanListInfo()}})}})}});$('.list-table').on('click','.trainee-name',function(){var traineeId=$(this).parent().find(".trainee-id").text();window.location.href="traineeInfo.html?traineeId="+traineeId});$("input.check-all").change(function(){if($(this).parent().hasClass("check")){$(this).parents("table").find("tbody input[type='checkbox']").setCheckBoxState("uncheck")}else{$(this).parents("table").find("tbody input[type='checkbox']").setCheckBoxState("check")}});$(".check-all-tab tbody").on("change","input[type='checkbox']",function(){if($(this).parents("table").find("tbody tr").length!=$(this).parents("table").find("tbody input[type='checkbox']:checked").length){$(this).parents("table").find(".check-all").setCheckBoxState("uncheck")}else{$(this).parents("table").find(".check-all").setCheckBoxState("check")}})},getPlanListInfo:function(){$yt_baseElement.showLoading();var keyword=$('#keyword').val();$('.page-info').pageInfo({pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"trainee/getTraineeList",type:"post",data:{selectParam:keyword},objName:'data',success:function(data){var carStates="";if(data.flag==0){var htmlTbody=$('.list-table .yt-tbody');var htmlTr='';var num=1;var gender;if(data.data.rows.length>0){$(htmlTbody).empty();$.each(data.data.rows,function(i,v){i=i+1;if(v.gender==1){gender="男"};if(v.gender==2){gender="女"}if(v.gender==""){gender=""}htmlTr='<tr><td style="width:33px;"><label class="check-label yt-checkbox select-assets-alert-checkbox" style="margin-left: 9px;"><input type="checkbox" name="test" class="select-assets-trainee-id" value="'+v.traineeId+'"/></label></td><td class="th-center">'+i+'</td><td style="display:none;" class="trainee-id">'+v.traineeId+'</td><td class="td-left trainee-name" ><a style="color:#3c4687;" class="yt-link" style="text-decoration: none;">'+v.traineeName+'</a></td><td class="th-center">'+gender+'</td><td class="td-left">'+v.groupName+'</td><td class="td-left">'+v.orgName+'</td><td class="th-center">'+v.deptPosition+'</td><td class="th-center">'+v.firstDate+'</td><td class="th-center">'+v.endDate+'</td><td class="td-right" style="text-align:right;">'+v.timesNumber+'</td><td class="td-right" style="width:33px;text-align:right;">'+v.trainNumber+'</td></tr>';htmlTbody.append(htmlTr)})}else{$(htmlTbody).empty();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="10" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>';htmlTbody.append(htmlTr)}$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })},delCarList:function(){var pkId=$('.yt-table-active .pkId').val();$yt_alert_Model.alertOne({haveCloseIcon:false,closeIconUrl:"",leftBtnName:"确定",rightBtnName:"取消",cancelFunction:"",alertMsg:"数据删除将无法恢复,确认删除吗?",confirmFunction:function(){$.ajax({type:"post",url:$yt_option.base_path+"administrator/car/removeBeanById",data:{pkId:pkId},success:function(data){if(data.flag==0){$yt_alert_Model.prompt("删除成功");$('.page-info').pageInfo("refresh")}else{$yt_alert_Model.prompt("删除失败");}}})}})}};$(function(){carList.init()});
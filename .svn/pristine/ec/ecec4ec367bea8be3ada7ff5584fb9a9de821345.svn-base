var printingDetailsList={init:function(){printingDetailsList.getPrintingDetails();$(".printing-details .yt-input").attr("disabled","disabled");var pkId=$yt_common.GetQueryString('pkId');$(".btn-sub").click(function(){if($(".current-state-text").text()!="已作废"){printingDetailsList.printCompleteNotice()}else{$yt_alert_Model.prompt("改文件已作废,无法打印")}});$(".btn-off").click(function(){window.location.href="printingList.html"});$(".btn-return").click(function(){window.location.href="printingList.html"})},getPrintingDetails:function(){var pkId=$yt_common.GetQueryString('pkId');$.ajax({type:"post",url:$yt_option.base_path+"class/printing/getBeanById",data:{pkId:pkId},success:function(data){$(".file-name").text(data.data.fileName);$('.file-name').attr('href',data.data.fileUrl);if(data.data.states==2){$(".current-state-text").text("已完成")}if(data.data.states==3){$(".current-state-text").text("等待打印")}if(data.data.states==4){$(".current-state-text").text("已作废")}if(data.data.fileType==1){$(".file-type").text("课件")}if(data.data.fileType==2){$(".file-type").text("通讯录")}if(data.data.fileType==3){$(".file-type").text("学员手册")}if(data.flag==0){$(".get-project-inf").setDatas(data.data);$(".project-type").setSelectVal(data.data.projectType);if(data.data.states==2){$('.btn-all').css('visibility','hidden')}}else{$yt_alert_Model.prompt("获取失败")}}})},printCompleteNotice:function(){var pkId=$yt_common.GetQueryString('pkId');$.ajax({type:"post",url:$yt_option.base_path+"class/printing/updatePrintingFinished",data:{pkId:pkId,states:2},success:function(data){if(data.flag==0){$yt_alert_Model.prompt("操作成功");window.location.href="printingList.html"}else{$yt_alert_Model.prompt("操作失败")}}})}};$(function(){printingDetailsList.init()});
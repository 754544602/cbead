/**
 * 班级信息
 */
var caList={init:function(){$("select").niceSelect();$(".start-time-start").calendar({controlId:"startDate",nowData:false,upperLimit:$(".start-time-end")});$(".start-time-end").calendar({controlId:"endDate",nowData:false,lowerLimit:$(".start-time-start")});$(".end-time-start").calendar({controlId:"startDate",nowData:false,upperLimit:$(".end-time-end")});$(".end-time-end").calendar({controlId:"endDate",nowData:false,lowerLimit:$(".end-time-start")});caList.getPlanListInfo();$('.list-table').on("click",".projectName",function(){var projectCode=$(this).parents("tr").find('.projectCode').val();window.location.href="classInfo.html?projectCode="+projectCode});var clickNumber=0;$('.search-more').click(function(){if(clickNumber%2==0){$('.search-box').show();$('.search-put').addClass('flipy')}else{$('.search-box').hide();$('.project-code').val("");$('.project-name').val("");$('.project-head').val("");$('.project-sell').val("");$('.project-state-box').each(function(){$(this).find("option:eq(0)").prop("selected","selected")});$('.project-type-box').each(function(){$(this).find("option:eq(0)").prop("selected","selected")});$('.start-time-start').val("");$('.start-time-end').val("");$('.end-time-start').val("");$('.end-time-end').val("");$('.search-put').removeClass('flipy')}clickNumber+=1});$('.yt-model-reset-btn').click(function(){$('.project-code').val("");$('.project-name').val("");$('.project-head').val("");$('.project-sell').val("");$("#project-type").setSelectVal("");$("#project-states").setSelectVal("");$('.start-time-start').val("");$('.start-time-end').val("");$('.end-time-start').val("");$('.end-time-end').val("")});$('.yt-model-sure-btn').click(function(){caList.getPlanListInfo()});$('.seach-btn').click(function(){caList.getPlanListInfo()})},getPlanListInfo:function(){var projectCode=$('.project-code').val();var projectName=$('.project-name').val();var projectType=$('#project-type').val();var projectSell=$('.project-sell').val();var projectHead=$('.project-head').val();var projectStates=$('#project-states').val();var startTimeStart=$('.start-time-start').val();var startTimeEnd=$('.start-time-end').val();var endTimeStart=$('.end-time-start').val();var endTimeEnd=$('.end-time-end').val();$('.list-page').pageInfo({async:false,pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"class/lookForAll",type:"post",data:{projectCode:projectCode,projectName:projectName,projectType:projectType,projectSell:projectSell,projectHead:projectHead,projectStates:projectStates,startTimeStart:startTimeStart,startTimeEnd:startTimeEnd,endTimeStart:endTimeStart,endTimeEnd:endTimeEnd},objName:'data',before:function(){$yt_baseElement.showLoading()},success:function(data){if(data.flag==0){var htmlTbody=$('.class-tbody');var htmlTr='';if(data.data.rows.length>0){$.each(data.data.rows,function(i,v){switch(v.projectType){case '1':v.projectType='计划';break;case '2':v.projectType='委托';break;case '3':v.projectType='选学';break;case '4':v.projectType='调训';break;default:v.projectType='';break}switch(v.projectStates){case '1':v.projectStates='未开始';break;case '2':v.projectStates=':培训中';break;case '3':v.projectStates='未结项';break;case '4':v.projectStates='已结项';break;default:v.projectStates='';break}htmlTr+='<tr><td>'+v.projectCode+'</td><input type="hidden" value="'+v.projectCode+'" class="projectCode"><td><a class="projectName">'+v.projectName+'</a></td><td>'+v.projectType+'</td><td class="text-overflow">'+v.projectSell+'</td><td class="text-overflow">'+v.projectHead+'</td><td class="tl">'+v.startDate+'</td><td class="tl">'+v.endDate+'</td><td class="tr">'+v.traineeCount+'</td><td>'+v.projectStates+'</td></tr>'});$('.list-page').show()}else{$('.list-page').hide();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="10" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>'}htmlTbody.html(htmlTr);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })}};$(function(){caList.init()});
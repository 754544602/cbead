var budgetApprovalList={init:function(){budgetApprovalList.getPendingBudgetApprovalListInf();$(".tab-title-list button").click(function(){$(this).addClass("active").siblings().removeClass("active");$(".box-list .content-box").hide().eq($(this).index()).show();if($(this).index()==0){budgetApprovalList.getPendingBudgetApprovalListInf()}else if($(this).index()==1){budgetApprovalList.getApprovalRecordListInf()}});$(".budget-approval-tbody").on("click",".project-name-approval",function(){window.location.href="/cbead/website/view/budgetApproval/budgetApprovalDetails.html?pkId="+$('.yt-table-active .pkId').val()});$(".approval-record-tbody").on("click",".project-name-approval",function(){window.location.href="/cbead/website/view/projectBudget/projectBudgetDetails.html?pkId="+$('.yt-table-active .pkId').val()});$(".search-btn").click(function(){budgetApprovalList.getPendingBudgetApprovalListInf()})},getPendingBudgetApprovalListInf:function(){$yt_baseElement.showLoading();var selectParam=$(".pending-approval-selectParam").val();$('.budget-approval-page').pageInfo({pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"finance/projectBudget/lookForAllByApproved",type:"post",data:{selectParam:selectParam,startDateStart:"",startDateEnd:"",createTimeStart:"",createTimeEnd:"",trainDateStart:"",trainDateEnd:"",surplusBudgetStart:"",surplusBudgetEnd:"",projectType:"",types:""},objName:'data',success:function(data){$yt_baseElement.showLoading();if(data.flag==0){var htmlTbody=$('.budget-approval-tbody');var htmlTr='';if(data.data.rows.length>0){$.each(data.data.rows,function(i,v){if(v.projectType==1){v.projectType="计划"}if(v.projectType==2){v.projectType="委托"}if(v.projectType==3){v.projectType="选学"}if(v.projectType==4){v.projectType="调训"}if(v.types==1){v.types="预算申请"}if(v.types==2){v.types="预算变更"}htmlTr+='<tr><td><a class="file-name"><input type="hidden" value="'+v.pkId+'" class="pkId">'+v.projectCode+'</a></td><td style="text-align: left;"><a style="color:#3c4687;" href="#" class="project-name-approval">'+v.projectName+'</a></td><td style="text-align: center;">'+v.projectType+'</td><td style="text-align: left;">'+v.projectHead+'</td><td>'+v.startDate+'</td><td style="text-align: right;">'+v.trainDate+'</td><td>'+v.createTime+'</td><td style="text-align: right;">'+v.budgetTotal+'</td><td style="text-align: center;">'+v.types+'</td><td style="text-align: center;">'+v.dealingWithPeople+'</td></tr>';$(".budget-approval-page").show()})}else{$(".budget-approval-page").hide();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="10" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>'}htmlTbody.html(htmlTr);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })},getApprovalRecordListInf:function(){var selectParam=$(".approval-record-selectParam").val();$('.approval-record-page').pageInfo({async:true,pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"finance/projectBudget/lookForAllByHi",type:"post",data:{selectParam:selectParam,startDateStart:"",startDateEnd:"",createTimeStart:"",createTimeEnd:"",trainDateStart:"",trainDateEnd:"",surplusBudgetStart:"",surplusBudgetEnd:"",projectType:"",types:""},before:function(){$yt_baseElement.showLoading()},objName:'data',success:function(data){if(data.flag==0){var htmlTbody=$('.approval-record-tbody');var htmlTr='';if(data.data.rows!=""){$.each(data.data.rows,function(i,v){if(v.projectType==1){v.projectType="计划"}if(v.projectType==2){v.projectType="委托"}if(v.projectType==3){v.projectType="选学"}if(v.projectType==4){v.projectType="调训"}if(v.types==1){v.types="预算申请"}if(v.types==2){v.types="预算变更"}htmlTr+='<tr><td><a class="file-name"><input type="hidden" value="'+v.pkId+'" class="pkId">'+v.projectCode+'</a></td><td style="text-align: left;"><a style="color:#3c4687;" href="#" class="project-name-approval">'+v.projectName+'</a></td><td style="text-align: center;">'+v.projectType+'</td><td style="text-align: left;">'+v.projectHead+'</td><td>'+v.startDate+'</td><td style="text-align: right;">'+v.trainDate+'</td><td>'+v.createTime+'</td><td style="text-align: right;">'+v.budgetTotal+'</td><td style="text-align: center;">'+v.types+'</td><td style="text-align: center;">'+v.dealingWithPeople+'</td></tr>';$(".approval-record-page").show()})}else{$(".approval-record-page").hide();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="10" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>'}htmlTbody.html(htmlTr);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })}};$(function(){budgetApprovalList.init()});
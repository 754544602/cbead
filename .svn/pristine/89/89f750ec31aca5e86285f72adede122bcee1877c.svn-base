var mouldList={init:function(){opertateType;var opertateType=$yt_common.GetQueryString("opertateType");if(opertateType==1){$('.title-text-p').text("学员手册模板编辑");}else{$('.title-text-p').text("新增手动模板");mouldList.ue=UE.getEditor('container',{toolbars:[['undo','redo','|','bold','italic','underline','forecolor','|','justifyleft','justifycenter','justifyright','justifyjustify','|','simpleupload','attachment']],enableContextMenu:false,autoHeightEnabled:true,elementPathEnabled:false,enableAutoSave:false,saveInterval:0})};var types=$yt_common.GetQueryString("types");if(types!=""){mouldList.getPlanListInfo()}var templateId=$yt_common.GetQueryString("templateId");$('.page-return-btn').click(function(){window.location.href="studentsManualMouldList.html?templateId="+templateId});$('.yt-model-canel-btn').click(function(){window.location.href="studentsManualMouldList.html?templateId="+templateId});$('.add-edit-btn').click(function(){mouldList.isNoNull()})},isNoNull:function(){var title=$('#title').val();var details=mouldList.ue.getContent();if(title==""||details==""){$yt_valid.validForm($(".valid-tab"));$yt_alert_Model.prompt("信息请填写完整")}else{mouldList.editMould()}},editMould:function(){var operateType=$('.title-text-p').text();var templateId=$yt_common.GetQueryString("templateId");var modelCode=$yt_common.GetQueryString("modelCode");var modelName=$('.model-name').val();var modelValue=mouldList.ue.getContent();var types=$('input[name="mould"]:checked').val();$.ajax({url:$yt_option.base_path+"class/traineeTemplate/addOrUpdateTemplate",type:"post",data:{templateId:templateId,modelCode:modelCode,modelName:modelName,types:types,modelValue:modelValue},success:function(data){$yt_baseElement.showLoading();if(data.flag==0){$yt_baseElement.hideLoading();window.location.href="studentsManualMouldList.html?templateId="+templateId}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("操作失败！")})}},})},getPlanListInfo:function(){var templateId=$yt_common.GetQueryString("templateId");var pkId=$yt_common.GetQueryString("pkId");var modelCode=$yt_common.GetQueryString("modelCode");$.ajax({url:$yt_option.base_path+"class/traineeTemplate/getTemplate",type:"post",data:{templateId:templateId,modelCode:modelCode},success:function(data){$yt_baseElement.showLoading();if(data.flag==0){$('.model-name').val(data.data.modelName);mouldList.ue=UE.getEditor('container',{toolbars:[['undo','redo','|','bold','italic','underline','forecolor','|','justifyleft','justifycenter','justifyright','justifyjustify','|','simpleupload','attachment']],enableContextMenu:false,autoHeightEnabled:true,autoFloatEnabled:false,elementPathEnabled:false,wordCount:false,enableAutoSave:false,enableAutoSave:false});mouldList.ue.ready(function(){mouldList.ue.setContent(data.data.modelValue)});$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })}};$(function(){mouldList.init()});
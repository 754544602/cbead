var assetsList={init:function(){$("select").niceSelect();$("#txtDate").calendar({speed:200,complement:true,lowerLimit:"2010/01/01",nowData:true,dateFmt:"yyyy-MM-dd",callback:function(){}});var numBool=true;$(".click-num").click(function(){$('.sort-icon').show();numBool=false;dateBool=true;$('.sort-icon-date').hide();if($(".click-num-inp").val()=="ASC"){$('.sort-icon').css('transform','rotate(0)');$(".click-num-inp").val("DESC")}else{$('.sort-icon').css('transform','rotate(180deg)');$(".click-num-inp").val("ASC")}$(".ass-order-type").val("assets_code");assetsList.getPlanListInfo()});$(".click-num").hover(function(){if(numBool){$('.sort-icon').show()}},function(){if(numBool){$('.sort-icon').hide()}});var dateBool=true;$(".click-date").hover(function(){if(dateBool){$('.sort-icon-date').show()}},function(){if(dateBool){$('.sort-icon-date').hide()}});$(".click-date").click(function(){dateBool=false;numBool=true;$('.sort-icon').hide();if($(".click-date-inp").val()=="ASC"){$('.sort-icon-date').css('transform','rotate(0)');$(".click-date-inp").val("DESC")}else{$('.sort-icon-date').css('transform','rotate(180deg)');$(".click-date-inp").val("ASC")}$(".ass-order-type").val("obtain_date");assetsList.getPlanListInfo()});$(".assetsWorth").on("focus",function(){if($(this).val()!=""){$(this).val($yt_baseElement.rmoney($(this).val()))}});$(".assetsWorth").on("blur",function(){if($(this).val()!=""){$(".hid-input-assets-worth").val($(this).val());$(this).val($yt_baseElement.fmMoney($(this).val()))}});$("input.check-all").change(function(){if($(this).parent().hasClass("check")){$(this).parents("table").find("tbody input[type='checkbox']").setCheckBoxState("uncheck");$(".check-all-tab tbody").find("tr").removeClass("yt-table-active")}else{$(this).parents("table").find("tbody input[type='checkbox']").setCheckBoxState("check");$(".check-all-tab tbody").find("tr").addClass("yt-table-active")}});$(".check-all-tab tbody").on("change","input[type='checkbox']",function(){if($(this).parents("table").find("tbody tr").length!=$(this).parents("table").find("tbody input[type='checkbox']:checked").length){$(this).parents("table").find(".check-all").setCheckBoxState("uncheck")}else{$(this).parents("table").find(".check-all").setCheckBoxState("check")}});$(".addList").click(function(){$(".btn-type").val(1);$("select").niceSelect();$('.ticket-title-span').text("新增资产");assetsList.clearAddBox();assetsList.getAssetsCode();assetsList.showAlert()});$(".select-teacher-btn-div").off().on('click','.select-ticket-sure-btn',function(){var aCode=assetsList.getAssetsCodeIsHave();if($yt_valid.validForm($(".add-table"))){if(aCode==1){$yt_alert_Model.prompt("资产编号已存在！")}else{assetsList.addOrUpdateRoom();$(".yt-edit-alert,#heard-nav-bak").hide();$("#pop-modle-alert").hide()}}});var pkId="";$(".updateList").click(function(){$(".btn-type").val(2);var len=$('.select-assets-alert-checkbox input[class="select-assets-pkId"]:checked').length;if(len==1){pkId=$('.select-assets-alert-checkbox input[class="select-assets-pkId"]:checked').val();$('.hid-pk-id').val(pkId);$('.ticket-title-span').text("修改资产");assetsList.clearAddBox();assetsList.showAlert();assetsList.getUpdate()}else{$yt_alert_Model.prompt("请选中一行数据进行操作",3000)}});$(".disableList").click(function(){assetsList.getExportAssets()});$(".class-tbody").on('click','.real-name-inf',function(){$(".only-look-shuttle-box").width("800px");$('.ticket-title-div').show();$('.info-copy-btn').show();$('.cont-info-hide').show();$('.copy-alert-title-div').hide();$('.cont-copy-hide').hide();var pkId=$(this).prev().val();$('.hid-pk-id').val(pkId);assetsList.clearAddBox();assetsList.onlyLookAlert();assetsList.lookOneInfor(pkId);$('.select-ticket-canel-btn').val("关闭");});assetsList.getPlanListInfo();$('.key-word').off().on('click','.search-btn',function(){assetsList.getPlanListInfo()});var typeList=assetsList.getTypeList();if(typeList!=null){$("#typeList").empty();$.each(typeList.data,function(i,n){if(n!=null){$("#typeList").append($('<option value="'+n.typeId+'">'+n.typeName+'</option>').data("classData",n))}})};$("select.typeId").niceSelect({search:true,backFunction:function(text){$("select.typeId option").remove();if(text==""){$("select.typeId").append('<option value="">请选择</option>')}$.each(typeList.data,function(i,n){if(n.typeName.indexOf(text)!=-1){$("select.typeId").append($('<option value="'+n.typeId+'">'+n.typeName+'</option>').data("classData",n))}})}});$('#typeList').on('change',function(){typeId=$(".hid-type-id").val("0");classifyName=$(".hid-type-name").val("");if($('#typeList').val()!=""){$('.typeId').removeClass("valid-hint");$('div.typeId').next().text("")}assetsList.getclassifyCode()});$('#assetsCodeList').on('change',function(){if($('#assetsCodeList').val()!=""){$('.classify-code-select').removeClass("valid-hint");$('div.classify-code-select').next().text("")}var assetsCode=$('#assetsCodeList option:selected').val();$('#classifyName').val(assetsCode);});$('#classifyName').on('change',function(){var classifyName=$('#classifyName option:selected').val();$('#assetsCodeList').val(classifyName);});$('#userName').on('change',function(){var userName=$('#userName option:selected').val();$('#administratorCode').val(userName);});var deptList=assetsList.getDeptList();if(deptList!=null){$.each(deptList.data,function(i,n){if(n.type==2){$("#deptList").append($('<option value="'+n.id+'">'+n.text+'</option>').data("classData",n))}if(n.type==3){$("#userName").append($('<option value="'+n.textName+'">'+n.text+'</option>').data("classData",n))}if(n.type==3){$("#administratorCode").append($('<option value="'+n.textName+'">'+n.text+'</option>').data("classData",n))}});$("select.deptId").niceSelect({search:true,backFunction:function(text){$("select.deptId option").remove();if(text==""){$("select.deptId").append('<option value="">请选择</option>')}$.each(deptList.data,function(i,n){if(n.type==2){if(n.text.indexOf(text)!=-1){$("#deptList").append($('<option value="'+n.id+'">'+n.text+'</option>').data("classData",n))}}})}});$("select.userName").niceSelect({search:true,backFunction:function(text){$("select.userName option").remove();if(text==""){$("select.userName").append('<option value="">请选择</option>')}$.each(deptList.data,function(i,n){if(n.type==3){if(n.text.indexOf(text)!=-1){$("#userName").append($('<option value="'+n.textName+'">'+n.text+'</option>').data("classData",n))}}})}});$("select.administratorCode").niceSelect({search:true,backFunction:function(text){$("select.administratorCode option").remove();if(text==""){$("select.administratorCode").append('<option value="">请选择</option>')}$.each(deptList.data,function(i,n){if(n.type==3){if(n.text.indexOf(text)!=-1){$("#administratorCode").append($('<option value="'+n.textName+'">'+n.text+'</option>').data("classData",n))}}})}})};$(".deleteList").click(function(){var pkId="";$('.select-assets-alert-checkbox input[class="select-assets-pkId"]:checked').each(function(){if(pkId==""){pkId=$(this).val()}else{pkId+=","+$(this).val()}});if(pkId==""){$yt_alert_Model.prompt("请选中一行数据进行操作",3000)}else{$yt_alert_Model.alertOne({alertMsg:"数据删除将无法恢复，确认删除吗？",confirmFunction:function(){assetsList.removeBeanById(pkId)}})}});$(".leading-in").undelegate().delegate("input","change",function(){var me=$(this);var addFile=$(this).attr("id");var fileName=$(this).val().split('\\');var fm=fileName[fileName.length-1]});assetsList.getAssetsCode();$("#assetsCode").blur(function(){var acc=assetsList.getAssetsCodeIsHave();if(acc==1){$yt_alert_Model.prompt("资产编号已存在！")}});$('.student-import-btn').on('click',function(){$(".batch-import-form").show();$yt_alert_Model.getDivPosition($(".batch-import-form"));$yt_model_drag.modelDragEvent($(".batch-import-form .yt-edit-alert-title"));$('.batch-import-form .yt-eidt-model-bottom .yt-model-canel-btn').off().on("click",function(){$(".batch-import-form").hide();$("#pop-modle-alert").hide()})});$('.batch-import-form .download-template').click(function(){var fileName="资产列表模板";$.ajaxDownloadFile({url:$yt_option.base_path+"administrator/assets/downloadAssts",data:{fileName:fileName}})});$(".leading-in").undelegate().delegate("input","change",function(){var me=$(this);var addFile=$(this).attr("id");var fileName=$(this).val().split('\\');var fm=fileName[fileName.length-1];$('.batch-import-form .import-file-name').val(fm)});$('.batch-import-form .yt-model-sure-btn').off().on('click',function(){var addFile='fileName';var fm=$('.batch-import-form .import-file-name').val();var url=$yt_option.base_path+"administrator/assets/importAssets";if(fm==""){$yt_alert_Model.prompt("请选择导入文件！")}else{$.ajaxFileUpload({url:url,type:"post",dataType:'json',fileElementId:addFile,data:{},success:function(data,textStatus){if(data.flag==0){$("#"+addFile).val("");$yt_alert_Model.prompt(data.message);$(".import-file-name").val("");assetsList.getPlanListInfo()}else{$(".erro-list-div tbody").empty();var erroTbo=$(".erro-list-div tbody");if(data.data==null){$("#"+addFile).val("");$yt_alert_Model.prompt(data.message);$(".import-file-name").val("")}else{$(".batch-import-form").hide();$("#pop-modle-alert").hide();$(".erro-list-div").show();$yt_alert_Model.getDivPosition($(".erro-list-div"));$yt_model_drag.modelDragEvent($(".erro-list-div .yt-edit-alert-title"));$('.erro-list-div .yt-eidt-model-bottom .yt-model-canel-btn').off().on("click",function(){$(".erro-list-div").hide();$("#pop-modle-alert").hide();$(".batch-import-form").hide();$("#"+addFile).val("");$(".import-file-name").val("")});$.each(data.data,function(i,j){var erroTr='<tr><td>'+j.excelNum+'</td><td style="text-align:left;">'+j.errorMessage+'</td></tr>';erroTbo.append(erroTr)})}}},error:function(data,status,e){$yt_alert_Model.prompt("附件导入失败!");$("#"+addFile).val("");$(".import-file-name").val("")}})}});$('.copy-btn').click(function(){$(".only-look-shuttle-box").width("600px");$('#count').val("");$('.start-num').val("");$('.end-num').text("");$('.ticket-title-div').hide();$('.info-copy-btn').hide();$('.cont-info-hide').hide();$('.copy-alert-title-div').show();$('.cont-copy-hide').show();$yt_model_drag.modelDragEvent($(".only-look-shuttle-box .copy-alert-title-div"))});$('.cop-canel-btn').click(function(){$(".only-look-shuttle-box").width("800px");$('.ticket-title-div').show();$('.info-copy-btn').show();$('.cont-info-hide').show();$yt_model_drag.modelDragEvent($(".only-look-shuttle-box .ticket-title-div"));$('.copy-alert-title-div').hide();$('.cont-copy-hide').hide()});$('#count').blur(function(){var vail=$yt_valid.validForm($(".copy-table"));if(vail){var intStarNum;$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getAssetsCode",async:false,data:{},success:function(data){$('.start-num').val(data.data);intStarNum=data.data},error:function(data){}});var count=parseInt($(this).val());var intStarNum=parseInt($(".start-num").val());var strNum='000000000'+intStarNum.toString();strNum=strNum.substring(strNum.length-9,strNum.length);$('.start-num').val(strNum);var strEndNum='000000000'+(intStarNum+count-1).toString();strEndNum=strEndNum.substring(strEndNum.length-9,strEndNum.length);$('.end-num').text(strEndNum)}});$('.start-num').blur(function(){var count=parseInt($('#count').val());var intStarNum=parseInt($(".start-num").val());var strNum='000000000'+intStarNum.toString();strNum=strNum.substring(strNum.length-9,strNum.length);$('.start-num').val(strNum);var strEndNum='000000000'+(intStarNum+count-1).toString();strEndNum=strEndNum.substring(strEndNum.length-9,strEndNum.length);$('.end-num').text(strEndNum)});$('.only-look-shuttle-box .yt-eidt-model-bottom .cop-sur-btn').off().on("click",function(){var pkId=$('.hid-pk-id').val();var count=$('#count').val();var assetsCode=$('.start-num').val();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/copyAssets",data:{pkId:pkId,copyCount:count,assetsCode:assetsCode},async:true,success:function(data){if(data.flag==0){$yt_alert_Model.prompt("复制成功",2000);assetsList.getPlanListInfo();$('.cont-copy-hide').hide()}else if(data.flag==5){$yt_alert_Model.alertOne({haveCloseIcon:false,leftBtnName:"确定",cancelFunction:"",alertMsg:"资产编码范围与已有资产编码重复，无法进行复制。请调整编码范围",cancelFunction:function(){$('.only-look-shuttle-box').show();}})}else{$yt_alert_Model.prompt(data.message,2000)}}});$(".yt-edit-alert,#heard-nav-bak").hide();$("#pop-modle-alert").hide()})},getclassifyCode:function(){$("#assetsCodeList  option:gt(0)").remove();var typeId=$(".hid-type-id").val();var classifyName=$(".hid-type-name").val();if(typeId=="0"&&classifyName==""){typeId=$('#typeList option:selected').val();classifyName=$('#typeList option:selected').data("classData").typeName}var classify=assetsList.getClassify(typeId,classifyName);if(classify!=null){$("#assetsCodeList").empty();$.each(classify.data,function(i,n){$("#assetsCodeList").append($('<option value="'+n.classifyCode+'">'+n.classifyCode+n.classifyName+'</option>').data("classData",n))})};$("select.classify-code-select").niceSelect({search:true,backFunction:function(text){$("select.classify-code-select option").remove();if(text==""){$("select.classify-code-select").append('<option value="">请选择</option>')}$.each(classify.data,function(i,n){var allCode=n.classifyCode+n.classifyName;if(allCode.indexOf(text)!=-1){$("#assetsCodeList").append($('<option value="'+n.classifyCode+'">'+n.classifyCode+n.classifyName+'</option>').data("classData",n))}})}})},showAlert:function(){$(".shuttle-box").show();$yt_alert_Model.getDivPosition($(".shuttle-box"));$yt_alert_Model.setFiexBoxHeight($(".shuttle-box .yt-edit-alert-main"));$yt_model_drag.modelDragEvent($(".shuttle-box .yt-edit-alert-title"));$('.shuttle-box .yt-eidt-model-bottom .yt-model-canel-btn').off().on("click",function(){$(".yt-edit-alert,#heard-nav-bak").hide();$("#pop-modle-alert").hide()})},onlyLookAlert:function(){$(".only-look-shuttle-box").show();$yt_alert_Model.getDivPosition($(".only-look-shuttle-box"));$yt_model_drag.modelDragEvent($(".only-look-shuttle-box .yt-edit-alert-title"));$('.only-look-shuttle-box .yt-eidt-model-bottom .yt-model-canel-btn').off().on("click",function(){$(".yt-edit-alert,#heard-nav-bak").hide();$("#pop-modle-alert").hide()})},getTypeList:function(){var list=[];$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getType",data:{typeName:""},async:false,success:function(data){list=data||[]}});return list},getClassify:function(typeId,classifyName){var list=[];$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getClassify",data:{typeId:typeId,classifyName:""},beforeSend:function(){$yt_baseElement.showLoading()},async:false,success:function(data){$yt_baseElement.hideLoading();list=data||[]}});return list},getDeptList:function(){var list=[];$.ajax({type:"post",url:$yt_option.base_path+"uniform/user/getUsers",data:{typeName:""},async:false,success:function(data){list=data||[]}});return list},getPlanListInfo:function(){var orderType="";var sort=$(".ass-order-type").val();if(sort=="assets_code"){orderType=$(".click-num-inp").val()}else if(sort=="obtain_date"){orderType=$(".click-date-inp").val()}else{}var keyword=$('#keyword').val();$('.page-info').pageInfo({pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"administrator/assets/lookForAll",type:"post",data:{selectParam:keyword,sort:sort,orderType:orderType},before:function(){$yt_baseElement.showLoading()},after:function(){$(".check-all-tab tbody tr").unbind().bind("click",function(){if($(this).find("input[type='checkbox']")[0].checked==true){$(this).find("input[type='checkbox']").setCheckBoxState("uncheck");$(this).removeClass("yt-table-active")}else{$(this).find("input[type='checkbox']").setCheckBoxState("check");$(this).addClass("yt-table-active")}if($(".check-all-tab tbody input:checkbox").not("input:checked").length>0){$(".check-all").setCheckBoxState("uncheck")}else{$(".check-all").setCheckBoxState("check")}})},objName:'data',async:true,success:function(data){var directionUse;var useStatus;if(data.flag==0){var htmlTbody=$('.list-table .yt-tbody');var htmlTr='';var num=1;if(data.data.rows.length>0){$('.page-info').show();$(htmlTbody).empty();$.each(data.data.rows,function(i,v){if(v.useStatus==4){useStatus="其他"};if(v.directionUse==1){directionUse="自用"}else if(v.directionUse==2){directionUse="出借"}else if(v.directionUse==3){directionUse="出租"}else if(v.directionUse==4){directionUse="其他"}else{directionUse=""};if(v.useStatus==1){useStatus="在用"}else if(v.useStatus==2){useStatus="不能用"}else if(v.useStatus==3){useStatus="闲置"}else if(v.useStatus==4){useStatus="其他"}else{useStatus=""};htmlTr='<tr><td style="text-align:center;position: relative;"><p style="width: 30px;height: 30px;position: absolute;top: 10px;z-index:100;opacity:0;"></p><label class="check-label yt-checkbox select-assets-alert-checkbox"><input type="checkbox" name="test" class="select-assets-pkId" value="'+v.pkId+'"/></label></td><td style="text-align:center;"><input type="hidden" value="'+v.pkId+'" class="pkId"><a style="color:#3c4687;" href="#" class="real-name-inf assetsCode">'+v.assetsCode+'</a></td><td >'+v.assetsName+'</td><td style="text-align:center;">'+v.typeName+'</td><td>'+v.assetsBrand+'</td><td style="text-align:center;">'+v.obtainDate+'</td><td style="text-align:center;">'+directionUse+'</td><td style="text-align:center;">'+useStatus+'</td><td style="text-align:center;">'+v.userName+'</td><td style="text-align:center;">'+v.administratorName+'</td><td>'+v.placeStorage+'</td></tr>';htmlTbody.append($(htmlTr).data("legalData",v))})}else{$(htmlTbody).empty();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="11" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>';$('.page-info').hide();htmlTbody.html(htmlTr)}$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })},clearAddBox:function(){$('.typeId').setSelectVal("");$('.classifyCode').setSelectVal("");$('.obtainDate').val("");$('.assetsName').val("");$('.sourceFunds').setSelectVal("");$('.assetsCode').val("");$('.directionUse').setSelectVal("");$('.assetsName').val("");$('.useStatus').setSelectVal("");$('.assetsBrand').val("");$('.deptId').setSelectVal("");$('.assetsModel').val("");$('.userName').setSelectVal("");$('.serialNumber').val("");$('.administratorCode').setSelectVal("");$('.assetsCount').val("");$('.placeStorage').val("");$('.assetsWorth').val("");$('.otherCode').val("");$('.remarks').val("")},look:function(){var typeId=$('#typeList').text();var classifyCode=$('#assetsCodeList').text();var obtainDate=$('#txtDate').text();var classifyName=$('.classifyName').text();var sourceFunds=$('.sourceFunds').text();var assetsCode=$('#assetsCode').text();var directionUse=$('.directionUse').text();var assetsName=$('.assetsName').text();var useStatus=$('.useStatus').text();var assetsBrand=$('.assetsBrand').text();var deptId=$('.deptId').text();var assetsModel=$('.assetsModel').text();var userCode=$('.userName').text();var serialNumber=$('.serialNumber').text();var administratorCode=$('.administratorCode').text();var assetsCount=$('.assetsCount').text();var placeStorage=$('.placeStorage').text();var assetsWorth=$('.assetsWorth').text();var remarks=$('.remarks').text()},getAssetsCode:function(){$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getAssetsCode",data:{},async:false,beforeSend:function(){$yt_baseElement.showLoading()},success:function(data){if(data.flag==0){$('.add-table').find('#assetsCode').val(data.data)}else if(data.flag==2){$yt_alert_Model.prompt(data.message)}$yt_baseElement.hideLoading()},error:function(){$yt_baseElement.hideLoading()}})},getAssetsCodeIsHave:function(){var numCode=0;var pkId=$('.hid-pk-id').val();var assetsCode=$('#assetsCode').val();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getAssetsCodeIsHave",data:{pkId:pkId,assetsCode:assetsCode},async:false,success:function(data){if(data.flag==0){if(data.data==1){numCode=data.data}}}});return numCode},addOrUpdateRoom:function(){var pkId=$('.hid-pk-id').val();var typeId=$('#typeList').val();var classifyCode=$('#assetsCodeList').val();var obtainDate=$('#txtDate').val();var classifyName=$('.classifyName').val();var sourceFunds=$('.sourceFunds').val();var assetsCode=$('#assetsCode').val();var directionUse=$('.directionUse').val();var assetsName=$('.assetsName').val();var useStatus=$('.useStatus').val();var assetsBrand=$('.assetsBrand').val();var deptId=$('.deptId').val();var assetsModel=$('.assetsModel').val();var userCode=$('.userName').val();var serialNumber=$('.serialNumber').val();var administratorCode=$('#administratorCode').val();var assetsCount=$('.assetsCount').val();var placeStorage=$('.placeStorage').val();var assetsWorth=$(".hid-input-assets-worth").val();var otherCode=$('.otherCode').val();var remarks=$('#remarks').val();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/addOrUpdateRoom",data:{pkId:pkId,typeId:typeId,classifyCode:classifyCode,obtainDate:obtainDate,assetsCode:assetsCode,assetsName:assetsName,assetsBrand:assetsBrand,sourceFunds:sourceFunds,directionUse:directionUse,useStatus:useStatus,deptId:deptId,assetsModel:assetsModel,userCode:userCode,serialNumber:serialNumber,administratorCode:administratorCode,assetsCount:assetsCount,placeStorage:placeStorage,assetsWorth:assetsWorth,otherCode:otherCode,remarks:remarks},async:false,before:function(){$yt_baseElement.showLoading()},success:function(data){if(data.flag==0){var btnType=$(".btn-type").val();if(btnType==1){$yt_alert_Model.prompt("新增数据成功！")}else{$yt_alert_Model.prompt("修改数据成功！")}$yt_baseElement.hideLoading();assetsList.getPlanListInfo()}else{$yt_baseElement.hideLoading(function(){if(btnType==1){$yt_alert_Model.prompt("新增数据失败！")}else{$yt_alert_Model.prompt("修改数据失败！")}});assetsList.getPlanListInfo()}}})},getUpdate:function(){var pkId=$('.hid-pk-id').val();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getBeanById",data:{pkId:pkId},beforeSend:function(){$yt_baseElement.showLoading()},async:true,success:function(data){if(data.flag==0){$(".hid-type-id").val("");$(".hid-type-name").val("");$(".hid-type-id").val(data.data.typeId);$(".hid-type-name").val(data.data.classifyName);if($(".hid-type-id").val()!=0&&$(".hid-type-name").val()!=""){assetsList.getclassifyCode()}$('#typeList').setSelectVal(data.data.typeId);$('#assetsCodeList').setSelectVal(data.data.classifyCode);$('#txtDate').val(data.data.obtainDate);$('#classifyName').setSelectVal(data.data.classifyCode);$('#sourceFunds').setSelectVal(data.data.sourceFunds);$('#assetsCode').val(data.data.assetsCode);$('#directionUse').setSelectVal(data.data.directionUse);$('.assetsName').val(data.data.assetsName);$('#useStatus').setSelectVal(data.data.useStatus);$('#assetsBrand').val(data.data.assetsBrand);$('#deptList').setSelectVal(data.data.deptId);$('#assetsModel').val(data.data.assetsModel);$('#userName').setSelectVal(data.data.userCode);$('#serialNumber').val(data.data.serialNumber);$('#administratorCode').setSelectVal(data.data.administratorCode);$('#assetsCount').val(data.data.assetsCount);$('#placeStorage').val(data.data.placeStorage);$('#assetsWorth').val(data.data.assetsWorth);$('#otherCode').val(data.data.otherCode);$('#remarks').val(data.data.remarks);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("获取数据失败")})}}})},removeBeanById:function(pkId){$yt_baseElement.showLoading();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/removeBeanById",async:false,data:{pkIds:pkId},success:function(data){if(data.flag==0){$yt_baseElement.hideLoading();assetsList.getPlanListInfo()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("删除资产失败")})}}})},lookOneInfor:function(pkId){$yt_baseElement.showLoading();$.ajax({type:"post",url:$yt_option.base_path+"administrator/assets/getBeanById",data:{pkId:pkId},async:false,success:function(data){if(data.flag==0){var directionUse="";var useStatus="";var sourceFunds="";if(data.data.sourceFunds==1){sourceFunds="财政"};if(data.data.sourceFunds==2){sourceFunds="自有"};if(data.data.sourceFunds==3){sourceFunds="财政&自有"};if(data.data.directionUse==1){directionUse="自用"};if(data.data.directionUse==2){directionUse="出借"};if(data.data.directionUse==3){directionUse="出租"}if(data.data.directionUse==4){directionUse="其它"}if(data.data.useStatus==1){useStatus="在用"};if(data.data.useStatus==2){useStatus="不能用"};if(data.data.useStatus==3){useStatus="闲置"};if(data.data.useStatus==4){useStatus="其他"};$('#typeName-look').text(data.data.typeName);$('#classifyCode-look').text(data.data.classifyCode);$('#txtDate-look').text(data.data.obtainDate);$('#classifyName-look').text(data.data.classifyName);$('#sourceFunds-look').text(sourceFunds);$('#assetsCode-look').text(data.data.assetsCode);$('#directionUse-look').text(directionUse);$('#assetsName-look').text(data.data.assetsName);$('#useStatus-look').text(useStatus);$('#assetsBrand-look').text(data.data.assetsBrand);$('#deptName-look').text(data.data.deptName);$('#assetsModel-look').text(data.data.assetsModel);$('#userName-look').text(data.data.userName);$('#serialNumber-look').text(data.data.serialNumber);$('#administratorName-look').text(data.data.administratorName);$('#assetsCount-look').text(data.data.assetsCount);$('#placeStorage-look').text(data.data.placeStorage);$('#assetsWorth-look').text(data.data.assetsWorth);$('#remarks-look').text(data.data.remarks);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("获取数据失败")})}}})},getExportAssets:function(){var selectParam=$('#keyword').val();var aText;var assetsCodes="";$('.select-assets-alert-checkbox input[class="select-assets-pkId"]:checked').each(function(i,n){aText=$(n).parent().parent().parent().eq(0).find('.assetsCode');if(assetsCodes==""){assetsCodes=aText.text()}else{assetsCodes+=","+aText.text()}});alertNmae=$('.types').val();$.ajaxDownloadFile({url:$yt_option.base_path+"administrator/assets/exportAssets",data:{selectParam:selectParam,obtainDateStart:"",obtainDateEnd:"",typeId:"",directionUse:"",useStatus:"",assetsCodes:assetsCodes,fileName:"资产导出数据"}})}};$(function(){assetsList.init()});
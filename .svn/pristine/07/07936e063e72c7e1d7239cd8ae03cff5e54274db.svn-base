var projectApprovalList={init:function(){projectApprovalList.getProjectApprovalList("project/lookForAllByApprove");$('.search-btn').click(function(){if($(".pending-btn").hasClass("active")){var path="project/lookForAllByApprove";projectApprovalList.getProjectApprovalList(path)}else{var path="project/lookForAllByHaveBeenApprove";projectApprovalList.getProjectApprovalList(path)}});$(".project-approval-tbody").on('click',".project-name",function(){var approve="";var pkId=$(this).parent().parent().find('.pkId').val();if($('.approved-btn').hasClass('active')){approve=1}var pass="Approval";window.location.href="/cbead/website/view/project/projectDetails.html?pkId="+pkId+"&projectCode="+$(".yt-table-active .project-code").text()+"&pass="+pass+"&approve="+approve});$(".pending-btn").click(function(){$(".pending-btn").addClass("active").siblings().removeClass("active");var path="project/lookForAllByApprove";projectApprovalList.getProjectApprovalList(path)});$(".approved-btn").click(function(){$(".approved-btn").addClass("active").siblings().removeClass("active");var path="project/lookForAllByHaveBeenApprove";projectApprovalList.getProjectApprovalList(path)})},getProjectApprovalList:function(path){$yt_baseElement.showLoading();selectParam=$(".selectParam").val();$('.project-approval-page').pageInfo({pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+path,type:"post",data:{selectParam:selectParam},objName:'data',success:function(data){$yt_baseElement.showLoading();if(data.flag==0){var htmlTbody=$('.project-approval-tbody');var htmlTr='';if(data.data.rows!=null){if(data.data.rows.length>0){$.each(data.data.rows,function(i,v){if(v.projectStates==1){v.projectStates="分配负责人"}else if(v.projectStates==2){v.projectStates="审批中"}if(v.projectType==2){v.projectType="委托"}if(path=="project/lookForAllByApprove"){$(".projeect-code-approval").text("序号");htmlTr+='<tr><td class="project-code"><input type="hidden" value="'+v.pkId+'" class="pkId">'+(i+1)+'</td><td><a class="project-name">'+v.projectName+'</a></td><td>'+v.projectType+'</td><td>'+v.startDate+'</td><td>'+v.trainDateCount+'</td><td>'+v.projectSell+'</td><td>'+v.traineeCount+'</td><td>'+v.projectStates+'</td></tr>';$(".project-approval-page").show()}else{$(".projeect-code-approval").text("项目编号");htmlTr+='<tr><td class="project-code"><input type="hidden" value="'+v.pkId+'" class="pkId">'+v.projectCode+'</td><td><a class="project-name">'+v.projectName+'</a></td><td>'+v.projectType+'</td><td>'+v.startDate+'</td><td>'+v.trainDateCount+'</td><td>'+v.projectSell+'</td><td>'+v.traineeCount+'</td><td>'+v.projectStates+'</td></tr>';$(".project-approval-page").show()}})}else{$(".project-approval-page").hide();htmlTr+='<tr style="border:0px;background-color:#fff !important;" ><td colspan="8" align="center" style="border:0px;"><div class="no-data" style="width: 280px;margin: 0 auto;"><img src="../../resources/images/common/no-data.png" alt="" style="padding: 35px 0 20px;"></div></td></tr>'}}htmlTbody.html(htmlTr);$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })}};$(function(){projectApprovalList.init()});
/**
 * 我的项目预算
 */
var bankBillList={init:function(){$("select").niceSelect();$(".deleteList").on('click',function(){if($(".yt-table-active").length==0){$yt_alert_Model.prompt("请选择要删除的数据");return false}bankBillList.delTeacherList()});$('.list-table .list-tbody').on("click",".real-name-inf",function(){window.location.href="bankBillListInfo.html?pkId="+$(".yt-table-active .pkId").val()});bankBillList.getPlanListInfo()},getPlanListInfo:function(){$('.page-info').pageInfo({pageIndexs:1,pageNum:15,pageSize:10,url:$yt_option.base_path+"finance/bankStatement/lookForAll",type:"post",data:{},objName:'data',before:function(){$yt_baseElement.showLoading()},success:function(data){if(data.flag==0){var htmlTbody=$('.list-table .list-tbody');var htmlTr='';var num=1;if(data.data.rows.length>0){$(htmlTbody).empty();$.each(data.data.rows,function(i,v){htmlTr='<tr><td><input type="hidden" value="'+v.pkId+'" class="pkId">'+num++ +'</td><td><a style="color:#3c4687;" href="#" class="real-name-inf" style=" color:blue">'+v.startEndDate+'</a></td><td style="text-align: left;">'+v.registeredBank+'</td><td style="text-align: left;">'+v.accounts+'</td><td style="text-align:left;">'+v.accountTitle+'</td><td style="text-align:right;">'+v.effectiveCount+'</td><td style="text-align: right;">'+v.effectiveTotal+'</td><td>'+v.createTimeString+'</td><td>'+v.createUser+'</td><td>'+v.noAdmissionCount+'</td></tr>';htmlTbody.append(htmlTr)})}$yt_baseElement.hideLoading()}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("查询失败")})}},isSelPageNum:true })},delTeacherList:function(){var pkId=$('.yt-table-active .pkId').val();$yt_alert_Model.alertOne({haveCloseIcon:false,closeIconUrl:"",leftBtnName:"确定",rightBtnName:"取消",cancelFunction:"",alertMsg:"数据删除将无法恢复,确认删除吗?",confirmFunction:function(){$.ajax({type:"post",url:$yt_option.base_path+"finance/bankStatement/removeBeanById",data:{pkId:pkId},before:function(){$yt_baseElement.showLoading()},success:function(data){if(data.flag==0){$yt_baseElement.hideLoading();$yt_alert_Model.prompt("删除成功");$('.page-info').pageInfo("refresh")}else{$yt_baseElement.hideLoading(function(){$yt_alert_Model.prompt("删除失败！")})}}})}})}};$(function(){bankBillList.init()});
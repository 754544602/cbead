(function($,window){var fixationPayment={init:function(){var ts=this;$('.yt-select').niceSelect();ts.events()},events:function(){var ts=this;$('#trip-file').on('change',function(){var ithis=$(this);var val=ithis.val();ithis.parents('.file-up-div').find('.file-msg').text(val)});ts.setFormEvent()},updateTotalNum:function(){var fundsTotalNum=0;$(".funds-num").each(function(){fundsTotalNum+=$yt_baseElement.rmoney($(this).text())});$("#applySumMoney").text(fundsTotalNum);var sumMoneyLower=arabiaToChinese(fundsTotalNum+"");$("#applyMoneyLower").text(sumMoneyLower)},setFormEvent:function(){$("#addCostApplyBtn").click(function(){$("#model-add-list-btn").removeClass("update").addClass("save").text("加入到列表");sysCommon.showModel($("#cost-apply-model"))});$("#model-canel-btn").click(function(){sysCommon.closeModel($("#cost-apply-model"));sysCommon.clearFormData()});$("#model-add-list-btn").click(function(){if($(this).hasClass("save")){var type=$("select.funds-type option:selected").text();var projectNum=$("select.project-num option:selected").text();var trHtml='<tr><td width="215px"><div style="width: 215px;">'+type+'</div></td><td width="130px"><div style="width:130px ;" class="funds-num">12</div></td><td width="185px"><div style="width: 185px;">'+projectNum+'</div></td><td width=""><div style="">-</div></td><td width=""><div style=""></div></td><td><input type="hidden" class="hid-set-met" data-val="setMethod"/><input type="hidden" class="hid-cost-type" value="0"/><span class="operate-update"><img src="../../../../../resources-sasac/images/common/edit-icon.png"/></span><span class="operate-del"><img src="../../../../../resources-sasac/images/common/del-icon.png"/></span></td></tr>';trHtml=$(trHtml);trHtml.find(".operate-del").click(function(){var thisObj=$(this);$yt_alert_Model.alertOne({alertMsg:"确定要删除此条数据吗?",leftBtnName:"确定",confirmFunction:function(){if(thisObj.parents("tbody").find("tr:not(.total-last-tr)").length==1){thisObj.parents("tbody").empty()}thisObj.parents("tr").remove();fixationPayment.updateTotalNum()}})});trHtml.find(".operate-update").click(function(){$("#model-add-list-btn").removeClass("save").addClass("update").text("保存");sysCommon.showModel($("#cost-apply-model"))});$("#subsidy-list-info .yt-tbody").append(trHtml)}else{}fixationPayment.updateTotalNum();sysCommon.closeModel($("#cost-apply-model"));sysCommon.clearFormData()})}};$(function(){fixationPayment.init()})})(jQuery,window);
var ordinaryPaymentApply={addListEvent:function(){var me=this;$('#addOrdinaryPayment').click(function(){me.showGeneralAlert();$('.ordinary-payment .general-common').off().on('click',function(){me.appendGeneralList();me.clearAlert($('.ordinary-payment .general-alert'))}).text('添加到列表')});$('.ordinary-payment .general-cancel').click(function(){me.hideGeneralAlert();me.clearAlert($('.ordinary-payment .general-alert'))});$('.ordinary-payment #paymentDetailedTable').on('click','.operate-update',function(){var ithis=$(this);var tr=ithis.parents('tr');var cont=$('#MoneyUse').val(tr.find('.ordinar-name').text());var sum=$('#addMoney').val(tr.find('.paydet-money').text());me.showGeneralAlert();$('.ordinary-payment .general-common').off().on('click',function(){me.appendGeneralList(tr)}).text('确定')})},hideGeneralAlert:function(){$yt_baseElement.hideMongoliaLayer();$('.ordinary-payment .general-alert').hide();$('#pop-modle-alert').hide()},appendGeneralList:function(tr){var me=this;var MoneyUse=$('.ordinary-payment .general-alert #MoneyUse').val();var addMoney=$('.ordinary-payment .general-alert #addMoney').val();if($yt_valid.validForm($(".ordinary-payment .alert-div"))){var num=$yt_baseElement.rmoney(addMoney);var html='<tr MoneyUse="'+MoneyUse+'" num="'+num+'"  class=""><td class="ordinar-name" style="text-align: left;">'+MoneyUse+'</td><td class="paydet-money" style="text-align: right;">'+($yt_baseElement.fmMoney(addMoney))+'</td><td><span class="operate-update"><img src="../../../../../resources-sasac/images/common/edit-icon.png"></span><span class="operate-del" style=""><img src="../../../../../resources-sasac/images/common/del-icon.png"></span></td></tr>';if(tr){tr.replaceWith(html)}else{$('#paymentDetailedTable tbody .pay-detail-tabel-total').before(html)}ordinaryPaymentApply.paymentTotal();me.hideGeneralAlert();me.clearAlert($('.ordinary-payment .general-alert'))}else{$yt_alert_Model.prompt('请填写完整数据')}},clearAlert:function(obj){var inputs=obj.find('input:not(.notClearRadio)');var textbig=obj.find('textarea');var valid=obj.find('.valid-font');$('.general-alert input').removeClass('valid-hint');valid.text('');inputs.val('');textbig.val('')},showGeneralAlert:function(){var alert=$('.ordinary-payment .general-alert');$yt_baseElement.showMongoliaLayer();$yt_alert_Model.getDivPosition(alert);$('#pop-modle-alert').show();alert.show()},moneyFormat:function(){$("#addMoney").on("focus",function(){if($(this).val()!=""){$(this).val($yt_baseElement.rmoney($(this).val()))}});$("#addMoney").on("blur",function(){if($(this).val()!=""){$(this).val($yt_baseElement.fmMoney($(this).val()))}})},paymentTotal:function(){var tds=$('#paymentDetailedTable tbody .paydet-money');var total=0;$.each(tds,function(i,n){total+=$yt_baseElement.rmoney($(n).text())});var fmTotal=$yt_baseElement.fmMoney(total);$('.count-val-num').text(fmTotal);$('.total-money-up').text(arabiaToChinese(fmTotal+''));$yt_baseElement.fmMoney($('#paymentDetailedTable tbody .total-money').text(fmTotal))},delPayment:function(){$('.ordinary-payment #paymentDetailedTable').on('click','.operate-del',function(){var ithis=$(this);var tr=ithis.parents('tr');$yt_alert_Model.alertOne({alertMsg:"数据删除将无法恢复,确认删除吗?",confirmFunction:function(){tr.remove();ordinaryPaymentApply.paymentTotal()}})})},dataAttrList:function(){var list=[];var tr=null;var trs=$('#paymentDetailedTable tbody tr:not(.pay-detail-tabel-total)');;$.each(trs,function(i,n){tr=$(n);list.push({normalId:'',normalName:tr.find(".ordinar-name").text(),normalAmount:$yt_baseElement.rmoney(tr.find(".payDet-money").text())})});return list},textbtn:function(){$(".text").off().on("click",function(){console.log(ordinaryPaymentApply.dataAttrList())})}};$(function(){ordinaryPaymentApply.addListEvent();ordinaryPaymentApply.moneyFormat();ordinaryPaymentApply.delPayment();ordinaryPaymentApply.textbtn()});